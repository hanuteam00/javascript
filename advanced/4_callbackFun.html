<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced_4_callback</title>
</head>
<script>
    const callback = (error,data) =>{
        if(error){
            console.log('>>> calling callback with error: ', error)
        }
        if(data){
            console.log('>>> calling callback with data: ', data)
        }
        // console.log('>>> calling callback', ' - error: ' + error, ' - data: '+ data)
    }
    //fire a function (callback) in other function (getTodos)
    function getTodos(callback) {
        var request = new XMLHttpRequest();
        request.onreadystatechange = function () {
            if (this.readyState === 4 && this.status === 200) {
                // if (this.readyState == 4) {
                // Typical action to be performed when the document is ready:
                // document.getElementById("demo").innerHTML = request.responseText;
                //console.log('>>> check res:', request.responseText)
                // console.log('>>> check res:', request)
                // callback()
                // callback(undefined,'my data');
                const data = request
                const dataResponseText = data.responseText
                const dataJson = JSON.parse(request.responseText)
                const dataString = JSON.stringify(dataJson)

                callback(undefined, data);
                callback(undefined, dataResponseText);
                callback(undefined, dataJson);
                callback(undefined, dataString);

            }
            if (this.readyState === 4&& this.status !== 200){
                // callback()
                callback('something wrong', undefined);
            }
            // else console.log('>>> check res status:', request.status)
        };
        request.open("GET", "https://jsonplaceholder.typicode.com/todos", true);
        request.send();
    }
    console.log(1)
    console.log(2)
    getTodos(callback)
    console.log(3)
    console.log(4)

</script>

<body>

</body>

</html>